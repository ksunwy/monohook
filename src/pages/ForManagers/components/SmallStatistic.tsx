import { formatNumber } from "../../../utils/formateNumber";

const SmallStatistic = ({ title, plan, fact, isWeight, measurement }: { title: string, plan: number, fact: number, isWeight: boolean, measurement: string }) => {
    let difference = fact - plan;
    let isPositive = difference > 0;
    let percent = fact * 100 / plan;
    return (
        <div className="relative w-[306px] h-[220px] min-h-fit flex flex-col gap-[12px] rounded-lg bg-textWhite p-[8px] ">
            <span className="font-bold text-[20px] font-sans">{title}</span>
            <div className="flex flex-col gap-[2px]">
                <span className="text-[20px]">План: {formatNumber(plan)} {measurement}</span>
                <span className="text-[20px]">Факт: {formatNumber(fact)} {measurement}</span>
                <div className="relative flex items-center gap-[8px]">
                    <span className={`text-[20px] font-bold leading-8 ${isPositive ? "text-green" : "text-red"}`}>{Math.floor(percent)}%</span>
                    <div className={`relative w-full h-[26px] p-[4px] rounded-[89px] ${isPositive ? "bg-[#0FAF6226]" : "bg-[#BA383826]"}`}>
                        <div style={{ width: percent >= 100 ? "calc(100%-8px)" : `${percent - 3}%` }} className={`absolute top-1/2 h-[18px] rounded-[89px] -translate-y-1/2 left-[4px] ${percent >= 100 ? "w-[calc(100%-8px)]" : `w-[${Math.floor(percent)}%]`} ${isPositive ? "bg-green" : "bg-red"}`}></div>
                    </div>
                </div>
                <span className={`text-[20px] flex items-center gap-[8px] ${isWeight ? "" : "mt-1"} ${isPositive ? "text-green" : "text-red"}`}>Отклонение:
                    <svg className={`${isPositive ? "rotate-180" : ""}`} width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.1477 7.96027L8.39775 14.7103C8.29224 14.8157 8.14918 14.875 8.00001 14.875C7.85084 14.875 7.70777 14.8157 7.60227 14.7103L0.852269 7.96027C0.773597 7.88161 0.720019 7.78138 0.698312 7.67226C0.676604 7.56314 0.687741 7.45004 0.730315 7.34725C0.772889 7.24447 0.844987 7.15661 0.937492 7.0948C1.03 7.03299 1.13875 7 1.25001 7H4.06251V5.3125C4.06251 5.16332 4.12177 5.02024 4.22726 4.91475C4.33275 4.80927 4.47583 4.75 4.62501 4.75H11.375C11.5242 4.75 11.6673 4.80927 11.7728 4.91475C11.8782 5.02024 11.9375 5.16332 11.9375 5.3125V7H14.75C14.8613 7 14.97 7.03299 15.0625 7.0948C15.155 7.15661 15.2271 7.24447 15.2697 7.34725C15.3123 7.45004 15.3234 7.56314 15.3017 7.67226C15.28 7.78138 15.2264 7.88161 15.1477 7.96027ZM11.9375 0.8125C11.9375 0.663316 11.8782 0.520243 11.7728 0.414754C11.6673 0.309265 11.5242 0.250001 11.375 0.25H4.62501C4.47582 0.25 4.33275 0.309263 4.22726 0.414753C4.12177 0.520242 4.06251 0.663316 4.06251 0.8125C4.06251 0.961684 4.12177 1.10476 4.22726 1.21025C4.33275 1.31574 4.47582 1.375 4.62501 1.375H11.375C11.5242 1.375 11.6673 1.31573 11.7728 1.21025C11.8782 1.10476 11.9375 0.961684 11.9375 0.8125ZM11.9375 3.0625C11.9375 2.91332 11.8782 2.77024 11.7728 2.66475C11.6673 2.55927 11.5242 2.5 11.375 2.5H4.62501C4.47582 2.5 4.33275 2.55926 4.22726 2.66475C4.12177 2.77024 4.06251 2.91332 4.06251 3.0625C4.06251 3.21168 4.12177 3.35476 4.22726 3.46025C4.33275 3.56574 4.47582 3.625 4.62501 3.625H11.375C11.5242 3.625 11.6673 3.56573 11.7728 3.46025C11.8782 3.35476 11.9375 3.21168 11.9375 3.0625Z" fill={isPositive ? "#0FAF62" : "#BA3838"} />
                    </svg>
                    {formatNumber(Math.abs(difference))} {measurement}
                </span>
                {isWeight ? <div className="flex items-center gap-[8px]">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2.93861 9.4327H0.248135C0.152897 7.31365 0.748135 5.55174 1.62909 4.14698L3.43861 5.59936C3.53385 5.67079 3.6529 5.71841 3.77194 5.71841C3.93861 5.71841 4.08147 5.64698 4.20052 5.52793C4.39099 5.28984 4.34337 4.95651 4.12909 4.76603L2.4148 3.40889L2.27194 3.24222C3.36718 1.81365 4.74814 0.599363 5.46242 0.123173C5.77195 -0.0911132 6.20052 -0.0196846 6.43861 0.289839L10.9862 6.74222L6.70052 8.36127C6.55766 8.40889 6.46242 8.52794 6.39099 8.64698C6.34338 8.78984 6.34338 8.9327 6.39099 9.07555C6.46242 9.21841 7.96242 12.6708 10.2719 13.0994C10.3672 13.1232 10.4862 13.1232 10.6291 13.1232C11.7481 13.1232 13.7005 12.5041 14.1053 12.3613C14.391 12.266 14.5339 11.9565 14.4386 11.6946C14.3434 11.4327 14.0339 11.266 13.7719 11.3613C12.7243 11.7184 10.9862 12.147 10.4624 12.0517C9.24814 11.8136 8.1529 10.1708 7.60528 9.14698C7.60528 9.14698 10.5339 8.05174 11.51 7.71841C12.0577 7.52793 13.3434 7.14698 13.4862 6.50413C13.6529 5.74222 13.2719 4.50412 13.2719 3.36127C13.2719 1.76603 14.6291 0.956506 15.9624 0.980315C17.5815 0.980315 18.6529 2.09936 18.3434 3.67079C18.3434 3.67079 19.4386 3.98032 19.6767 5.12317C19.7243 5.36127 19.5339 5.57555 19.3196 5.55174C18.6767 5.52793 17.7243 5.59936 17.51 6.07555C17.1767 6.83746 17.6767 7.88508 18.1529 8.6946C18.6291 9.50413 19.1767 10.8136 19.0577 12.3851C18.8672 14.8375 17.51 17.4803 11.7719 18.1232L12.391 18.9089H13.891C14.1767 18.9089 14.4386 19.147 14.4386 19.4565C14.4386 19.766 14.2005 20.0041 13.891 20.0041H8.74814C8.46242 20.0041 8.20052 19.766 8.20052 19.4565C8.20052 19.147 8.43861 18.9089 8.74814 18.9089H10.0339L7.89099 17.1232C7.89099 17.1232 6.4148 18.4327 5.51004 19.0517C5.22433 19.266 4.81957 19.2184 4.58147 18.9327C4.1529 18.4327 3.43861 17.4565 2.72433 16.3613L5.01004 14.9565C5.27194 14.8136 5.34338 14.4803 5.17671 14.2184C5.03385 13.9565 4.70052 13.8851 4.43861 14.0517L2.12909 15.4327C1.31956 14.0517 0.557659 12.3851 0.295755 10.5041H2.93861C3.22433 10.5041 3.48623 10.266 3.48623 9.95651C3.48623 9.64698 3.22433 9.4327 2.93861 9.4327ZM16.3196 3.78984C16.7243 3.78984 17.0339 3.48032 17.0339 3.07555C17.0339 2.67079 16.7243 2.36127 16.3196 2.36127C15.9148 2.36127 15.6053 2.67079 15.6053 3.07555C15.6053 3.45651 15.9148 3.78984 16.3196 3.78984Z" fill="black" />
                    </svg>
                    <span className="text-[20px]">9,13 из 9,67 {measurement}</span>
                    <svg className={`${isPositive ? "rotate-180" : ""}`} width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.1477 7.96027L8.39775 14.7103C8.29224 14.8157 8.14918 14.875 8.00001 14.875C7.85084 14.875 7.70777 14.8157 7.60227 14.7103L0.852269 7.96027C0.773597 7.88161 0.720019 7.78138 0.698312 7.67226C0.676604 7.56314 0.687741 7.45004 0.730315 7.34725C0.772889 7.24447 0.844987 7.15661 0.937492 7.0948C1.03 7.03299 1.13875 7 1.25001 7H4.06251V5.3125C4.06251 5.16332 4.12177 5.02024 4.22726 4.91475C4.33275 4.80927 4.47583 4.75 4.62501 4.75H11.375C11.5242 4.75 11.6673 4.80927 11.7728 4.91475C11.8782 5.02024 11.9375 5.16332 11.9375 5.3125V7H14.75C14.8613 7 14.97 7.03299 15.0625 7.0948C15.155 7.15661 15.2271 7.24447 15.2697 7.34725C15.3123 7.45004 15.3234 7.56314 15.3017 7.67226C15.28 7.78138 15.2264 7.88161 15.1477 7.96027ZM11.9375 0.8125C11.9375 0.663316 11.8782 0.520243 11.7728 0.414754C11.6673 0.309265 11.5242 0.250001 11.375 0.25H4.62501C4.47582 0.25 4.33275 0.309263 4.22726 0.414753C4.12177 0.520242 4.06251 0.663316 4.06251 0.8125C4.06251 0.961684 4.12177 1.10476 4.22726 1.21025C4.33275 1.31574 4.47582 1.375 4.62501 1.375H11.375C11.5242 1.375 11.6673 1.31573 11.7728 1.21025C11.8782 1.10476 11.9375 0.961684 11.9375 0.8125ZM11.9375 3.0625C11.9375 2.91332 11.8782 2.77024 11.7728 2.66475C11.6673 2.55927 11.5242 2.5 11.375 2.5H4.62501C4.47582 2.5 4.33275 2.55926 4.22726 2.66475C4.12177 2.77024 4.06251 2.91332 4.06251 3.0625C4.06251 3.21168 4.12177 3.35476 4.22726 3.46025C4.33275 3.56574 4.47582 3.625 4.62501 3.625H11.375C11.5242 3.625 11.6673 3.56573 11.7728 3.46025C11.8782 3.35476 11.9375 3.21168 11.9375 3.0625Z" fill={isPositive ? "#0FAF62" : "#BA3838"} />
                    </svg>
                    <span className={`${isPositive ? "text-green" : "text-red"} text-[20px]`}>0,54 {measurement}</span>
                </div> : null}
            </div>
        </div>
    )
}

export default SmallStatistic
